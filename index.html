<!DOCTYPE html>
<html lang="en">
<head>
  <title>Where is NDIS funding most used and for accessing what services?</title>
  <style>
    body {
      background-color: #f4f4f4;
      font-family: Arial, Helvetica, sans-serif;
    }
    h1, h2 {
      text-align: center;
    }
    .intro-text, .conclusion {
      width: 90%;
      margin: 20px auto;
      padding: 10px;
      background-color: #ffffff;
      border: 1px solid gray;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .graph-container {
      border: 1px solid gray;
      padding: 10px;
      background-color: #e9e9e9;
      width: 48%;
      height: 500px;
      box-sizing: border-box;
    }
    .text-container {
      border: 1px solid gray;
      padding: 10px;
      margin-top: 10px;
      background-color: #ffffff;
      width: 90%;
      margin: 20px auto;
    }
    .flex-container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .dot-points ul {
      list-style-type: disc;
      margin-left: 20px;
    }
  </style>
  <!-- Vega and Vega-Lite libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <h1>Where is NDIS funding most used and for accessing what services?</h1>

  <div class="intro-text">
    <p>
      Understanding where NDIS funding is most utilised and for which services can provide essential insights into where Australia may need to increase support. From a research perspective, this could highlight a need for more therapy services in certain areas, while from a government resourcing point of view, it may suggest additional funding for Support Coordination if it is widely utilised. This story will guide us through these insights on a state-by-state basis.
    </p>
  </div>

  <h2>State-wise Funding and Age Group Breakdown</h2>
  <div class="flex-container">
    <div class="graph-container" id="map-chart"></div>
    <div class="graph-container" id="age-group-chart"></div>
  </div>
  <div class="text-container">
    <p>By selecting a state on the map, the chart next to it dynamically updates to show the breakdown of participants by age group, helping to understand which age groups are most reliant on NDIS support in each state.</p>
  </div>

  <h2>Service Usage Breakdown</h2>
  <div class="flex-container">
    <div class="graph-container" id="tree-map-chart"></div>
  </div>
  <div class="text-container">
    <p>Once the state is selected, the treemap reveals which services are most utilised in that region. This helps us identify the most common needs—whether it’s Therapy, Support Coordination, or Plan Management services.</p>
  </div>

  <h2>Funding Allocation per Service</h2>
  <div class="flex-container">
    <div class="graph-container" id="funding-bar-chart"></div>
  </div>
  <div class="text-container">
    <p>The funding bar chart shows how the funding is distributed across different services within the selected state, providing a financial perspective on resource allocation and NDIS spending priorities.</p>
  </div>

  <div class="conclusion">
    <h2>Conclusion</h2>
    <p>
      This exploration into NDIS funding reveals the diverse needs across different states and age groups. While some regions show a high reliance on therapy services, others might indicate a demand for more support coordination. Understanding these trends is crucial for improving NDIS resourcing and delivering targeted services to participants across Australia.
    </p>
  </div>

  <!-- Vega-Lite Chart Configurations -->
  <script>
    // Map of Australia (State Selection) Example
    var mapChart = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "Map of Australia with NDIS Funding Access by State",
      "title": "NDIS Funding Access by State (2024)",
      "width": "container",
      "height": 400,
      "projection": {"type": "mercator"},
      "layer": [
        {
          "data": {
            "url": "https://vega.github.io/vega-datasets/data/aus-10m.json",
            "format": {"type": "topojson", "feature": "states"}
          },
          "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
        },
        {
          "data": {
            "values": [
              {"state": "New South Wales", "access": 3200, "lat": -33.8688, "lon": 151.2093},
              {"state": "Victoria", "access": 2800, "lat": -37.8136, "lon": 144.9631},
              {"state": "Queensland", "access": 2200, "lat": -27.4698, "lon": 153.0251},
              {"state": "Western Australia", "access": 1600, "lat": -31.9505, "lon": 115.8605},
              {"state": "South Australia", "access": 1400, "lat": -34.9285, "lon": 138.6007},
              {"state": "Tasmania", "access": 600, "lat": -42.8821, "lon": 147.3272},
              {"state": "Northern Territory", "access": 400, "lat": -12.4634, "lon": 130.8456},
              {"state": "Australian Capital Territory", "access": 200, "lat": -35.2809, "lon": 149.1300}
            ]
          },
          "mark": "circle",
          "encoding": {
            "longitude": {"field": "lon", "type": "quantitative"},
            "latitude": {"field": "lat", "type": "quantitative"},
            "size": {"field": "access", "type": "quantitative", "title": "Access (Number of People)"},
            "color": {"field": "access", "type": "quantitative", "title": "Access (Number of People)"},
            "tooltip": [
              {"field": "state", "type": "nominal", "title": "State"},
              {"field": "access", "type": "quantitative", "title": "People Accessing Funding"}
            ]
          }
        }
      ]
    };

    // Age Group Breakdown (Interactive)
    var ageGroupChart = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "Age Group Breakdown for Selected State",
      "title": "Age Group Breakdown for Selected State",
      "width": "container",
      "height": 400,
      "data": {
        "values": [
          {"ageGroup": "0-14", "access": 1200},
          {"ageGroup": "15-24", "access": 900},
          {"ageGroup": "25-44", "access": 1500},
          {"ageGroup": "45-64", "access": 1000},
          {"ageGroup": "65+", "access": 600}
        ]
      },
      "mark": "bar",
      "encoding": {
        "x": {"field": "ageGroup", "type": "nominal", "title": "Age Group"},
        "y": {"field": "access", "type": "quantitative", "title": "Number of People Accessing"}
      }
    };

    // Service Usage Tree Map
    var treeMapChart = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "Service Usage Breakdown for Selected State",
      "title": "Service Usage Breakdown for Selected State",
      "width": "container",
      "height": 400,
      "mark
